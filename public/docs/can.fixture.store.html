<!DOCTYPE html>

<!--[if lt IE 7]>
<html class="no-js ie lt-ie9 lt-ie8 lt-ie7" lang="en">
<![endif]-->
<!--[if IE 7]>
<html class="no-js ie lt-ie9 lt-ie8" lang="en">
<![endif]-->
<!--[if IE 8]>
<html class="no-js ie lt-ie9" lang="en">
<![endif]-->
<!--[if IE 9]>
<html class="no-js ie ie9" lang="en">
<![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
	<meta charset="utf-8">
	<title>JavaScriptMVC - store </title>
	<meta name="description" content="">
	<meta name="author" content="">

	<link rel="stylesheet" type="text/css" 
		
			href="./static/production.css"
		 />
	<!--[if lt IE 9]>
   <script type="text/javascript" src="./static/html5shiv.js"></script>
    <!--<![endif]-->
</head>

<body class="docs">
	<header>
		<nav class="container">

			<div class="logo-menu">
				<a class="brand" href="./index.html">JavaScriptMVC</a>
			</div>

			<div class="pull-right">
				<div class="bitovi-menu">
					<a href="http://bitovi.com" class="bitovi icon-bits">Bitovi</a>
					<ul class="dropdown-menu">
						<li><a href="http://bitovi.com">Bitovi.com</a></li>
						<li><a href="http://bitovi.com/blog/">Blog</a></li>
						<li><a href="http://bitovi.com/consulting/">Consulting</a></li>
						<li><a href="http://bitovi.com/training/">Training</a></li>
						<li><a href="http://bitovi.com/open-source/">Open Source</a></li>
						<li><a href="http://bitovi.com/people/">People</a></li>
						<li><a href="http://bitovi.com/contact/">Contact Us</a></li>
					</ul>
				</div>
			</div>
		</nav>
	</header>

	<div class="container api">
	<nav class="sidebar">
		
		<div class="search-wrapper">
			<div class="search">
				<input type="text"/>
			</div>
		</div>
		
		<ul class="api cascading primary-grouping"> 
	
		
		<li class="search-container active parent">
			<a href="index.html" data-search="JavaScriptMVC">
				JavaScriptMVC
			</a>
		</li>
		
		<li class="search-container active parent">
			<a href="canjs.html" data-search="CanJS">
				CanJS
			</a>
		</li>
		
		<li class="search-container active parent">
			<a href="can.fixture.html" data-search="can.fixture">
				can.fixture
			</a>
		</li>
		
		
			<li class="search-container active">
			<a href="can.fixture.store.html" data-search="store">
				store
			</a>
			
	<ul>
		
			
				
				
				<li class="search-container">
					<a class="function" href="can.fixture.store.create.html" data-search="can.fixture.store.create">
						create
					</a>
				</li>
				
			
			
		
			
				
				
				<li class="search-container">
					<a class="function" href="can.fixture.store.destroy.html" data-search="can.fixture.store.destroy">
						destroy
					</a>
				</li>
				
			
			
		
			
				
				
				<li class="search-container">
					<a class="function" href="can.fixture.store.find.html" data-search="can.fixture.store.find">
						find
					</a>
				</li>
				
			
			
		
			
				
				
				<li class="search-container">
					<a class="function" href="can.fixture.store.findAll.html" data-search="can.fixture.store.findAll">
						findAll
					</a>
				</li>
				
			
			
		
			
				
				
				<li class="search-container">
					<a class="function" href="can.fixture.store.findOne.html" data-search="can.fixture.store.findOne">
						findOne
					</a>
				</li>
				
			
			
		
			
				
				
				<li class="search-container">
					<a class="function" href="can.fixture.store.reset.html" data-search="can.fixture.store.reset">
						reset
					</a>
				</li>
				
			
			
		
			
				
				
				<li class="search-container">
					<a class="function" href="can.fixture.store.update.html" data-search="can.fixture.store.update">
						update
					</a>
				</li>
				
			
			
		
	</ul>


		</li>
		
	
</ul>

	</nav>
	<article class="content docs">
		<section class="title">
			<div class="pull-right">
	<ul class="tags">
		<li>function</li>
	</ul>
	<ul class="links">
		
			<li><a href="">source</a></li>
		
		
			
		
		
	</ul>
</div>

<h1>
store

	
		<span class="module">can.fixture.store</span>
	


</h1>

<span class="inherits">&nbsp;</span>

		</section>

		<section class="contents">
		</section>

		<section class="description">
			<p>Make a store of objects to use when making requests against fixtures. </p>
		</section>

		
		<section class="signature">
			<h2>can.fixture.store([types,] count, make[, filter])</h2>
<div class="signature-wrapper">


	<h3>Parameters</h3>

	<ol class="parameters">
		
		<li class="parameter">
			<h4>types
				<code>{Array | String}</code><span class="pull-right optional">Optional</span></h4>
			<div class="description">
				<p>An array of the fixture names or the singular fixture name.
If an array, the first item is the plural fixture name (prefixed with -) and the second
item is the singular name.  If a string, it's assumed to be the singular fixture name.  Make
will simply add s to the end of it for the plural name. If this parameter is not an array
or a String the fixture won't be added and only return the generator object.</p>
			</div>
			
			
			
			
			
		</li>
		
		<li class="parameter">
			<h4>count
				<code>{Number}</code></h4>
			<div class="description">
				<p>The number of items to create.</p>
			</div>
			
			
			
		</li>
		
		<li class="parameter">
			<h4>make
				<code>{function()}</code></h4>
			<div class="description">
				<p>A function that will return the JavaScript object. The
make function is called back with the id and the current array of items.</p>
			</div>
			
			
			
		</li>
		
		<li class="parameter">
			<h4>filter
				<code>{function()}</code><span class="pull-right optional">Optional</span></h4>
			<div class="description">
				<p>A function used to further filter results. Used for to simulate
server params like searchText or startDate.
The function should return true if the item passes the filter,
false otherwise. For example:</p>

<pre><code>function(item, settings){
  if(settings.data.searchText){
       var regex = new RegExp("^"+settings.data.searchText)
      return regex.test(item.name);
  }
}
</code></pre>
			</div>
			
			
			
		</li>
		
	</ol>


	<h3>Returns</h3>
	<div class="returns">
		<h4><code>{Object}</code></h4>
		<div class="description">
			<p>A generator object providing fixture functions for <em>findAll</em>, <em>findOne</em>, <em>create</em>,
<em>update</em> and <em>destroy</em>.</p>
		</div>
	</div>


</div>

		</section>
		

		

		
		<section class="comment">
			<p><code>can.fixture.store(count, generator(index,items))</code> is used
to create a store of items that can simulate a full CRUD service. Furthermore,
the store can do filtering, grouping, sorting, and paging.</p>

<h2>Basic Example</h2>

<p>The following creates a store for 100 todos:</p>

<pre><code>var todoStore = can.fixture.store(100, function(i){
  return {
       id: i,
    name: "todo number "+i,
    description: "a description of some todo",
    ownerId: can.fixture.rand(10)
  }
})
</code></pre>

<p><code>todoStore</code>'s methods can be used for the response to a REST service like:</p>

<pre><code> can.fixture({
      'GET /todos':         todoStore.findAll,
   'GET /todos/{id}':    todoStore.findOne,
   'POST /todos':        todoStore.create,
   'PUT /todos/{id}':    todoStore.update,
   'DELETE /todos/{id}': todoStore.destroy
 });
</code></pre>

<p>These fixtures, combined with a <a href="can.Model.html">can.Model</a> that connects to these services like:</p>

<pre><code> var Todo = can.Model({
     findAll : 'GET /todos',
     findOne : 'GET /todos/{id}',
     create  : 'POST /todos',
     update  : 'PUT /todos/{id}',
     destroy : 'DELETE /todos/{id}'
 }, {});
</code></pre>

<p>... allows you to simulate requests for all of owner 5's todos like:</p>

<pre><code>Todo.findAll({ownerId: 5}, function(todos){

})
</code></pre>

<h2>Simulated Service</h2>

<p><code>can.fixture.store</code>'s <a href="can.fixture.store.findAll.html">findAll</a>,
<a href="can.fixture.store.findOne.html">findOne</a>,
<a href="can.fixture.store.findOne.html">create</a>,
<a href="can.fixture.store.findOne.html">update</a>, and
<a href="can.fixture.store.findOne.html">destroy</a> methods are used to
simulate a REST service that </p>

<h2>With can.ajax</h2>

<pre><code>//makes a nested list of messages
can.fixture.store(["messages","message"], 1000,
 function(i, messages){
  return {
    subject: "This is message "+i,
    body: "Here is some text for this message",
    date: Math.floor( new Date().getTime() ),
    parentId : i &lt; 100 ? null : Math.floor(Math.random()*i)
  }
})
//uses the message fixture to return messages limited by
// offset, limit, order, etc.
can.ajax({
  url: "messages",
  data: {
     offset: 100,
     limit: 50,
     order: ["date ASC"],
     parentId: 5},
   },
   fixture: "-messages",
   success: function( messages ) {  ... }
});
</code></pre>

<h2>With can.Model</h2>

<p><code>can.fixture.make</code> returns a model store that offers <code>findAll</code>, <code>findOne</code>, <code>create</code>,
<code>update</code> and <code>destroy</code> fixture functions you can map to a <a href="can.Model.html">can.Model</a> Ajax request.
Consider a model like this:</p>

<p>And an unnamed generated fixture like this:</p>

<pre><code> var store = can.fixture.make(100, function(i) {
     return {
         id : i,
         name : 'Todo ' + i
     }
 });
</code></pre>

<p>You can map can.Model requests using the return value of <code>can.fixture.make</code>:</p>
		</section>
		

		
	</article>
</div>



	<footer>
		<nav class="container">
			<a class="brand javascriptmvc" href="index.html"></a>
		</nav>
	</footer>
	<script type="text/javascript">
		window.Bitovi = {
			URL: {
				BUILDER: '',
				BUILDER_DATA: '',
				BITHUB: '',
				CDN: ''
			}
		}
		steal = {
			productionId: "production.js",
			executed: ["documentjs/site/static/build/production.css"]
		}
	</script>
	<script type='text/javascript' 
	
		src="./static/steal.production.js"
	
		></script>
</body>

</html>

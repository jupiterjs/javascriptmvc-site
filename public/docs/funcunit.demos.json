c({"name": "funcunit.demos", "type": "page", "comment": "<p>This page contains examples of tests that solve common problems.</p>\n\n<h2>Login</h2>\n\n<p>If an application requires login, the tests to automate logging in before we can reach \nthe other pages.  Usually when testing in browser mode, this step can be skipped, since \ndevelopers will already be logged in when running tests.  Here's a login step that only runs \nwhen using automation tools</p>\n\n<pre><code class='javascript'>test(\"login test\", function () {\n    if (/mode=commandline/.test(window.location.search)) {\n        S.open(\"/login\")\n        S(\"#username\").exists().click().type(\"superadmin\")\n        S(\"#password\").exists().click().type(\"password\")\n        S(\".submit input\").exists().click()\n\n        // wait for next page to load\n        S(\".content\").visible(function () {\n            ok(true, \"logged in\");\n        })\n    } else {\n        ok(true, \"assuming you are logged in\");\n    }\n})</code></pre>\n\n<h2>Testing with fixtures</h2>\n\n<p>Its often very useful to fixturize your entire application, so that tests can be run without any \nserver running.  This allows you to isolate problems to JavaScript code. It also allows you to write \nnon-brittle tests, since the data you depend on is not changing.  A good pattern for this is to load \na settings file, which loads fixtures whenever an application page is opened via filesystem.</p>\n\n<pre><code class='javascript'>if(location.protocol === \"file:\" || /fixtures\\=on/.test(location.search)){\n    steal('fixtures');\n}</code></pre>\n\n<h2>Srchr Smoke Test</h2>\n\n<p>This section will walk through creating a smoke test for the [http://javascriptmvc.com/srchr/srchr.html Srchr application]. <br />\nSrchr is a simple demo application that lets you search several sources for images.  There is a search pane, \ntabs, a history pane, and a results area.</p>\n\n<p><img class='image_tag' src='site/images/srchr.png' />\nThe purpose of a smoke test is to test enough functionality in an application to verify its working correctly, as \nquickly as possible.</p>\n\n<p>In this smoke test we'll:</p>\n\n<ol>\n<li>click the Flickr search option</li>\n<li>type \"puppy\" in the search box</li>\n<li>wait for results to show up in the results panel</li>\n<li>verify 10 results are visible</li>\n<li>verify the history panel shows \"puppy\"</li>\n</ol>\n\n<p>Let's start by creating a skeleton test with some pseudocode:</p>\n\n<pre><code class='javascript'>module(\"Srchr\",{\n    setup: function() {\n        S.open(\"//srchr/srchr.html\");\n    }\n})\n\ntest(\"Smoke Test\", function(){\n    // click search options\n    // type puppy\n    // wait for results\n    // verify 10 results\n    // verify history has puppy\n})</code></pre>\n\n<p>Now lets start to fill in these commands, leaving the actual selectors for last.</p>\n\n<pre><code class='javascript'>flickrInput.click();\n// \\r means hit enter, which submits the form\nsearchInput.click().type(\"puppy\\r\");\nresultElements.visible(function(){\n    equals(resultsElements.size(), 10, \"There are 10 results\");\n    ok(/puppy/.test( historyEl.text() ), \"History has puppy\");\n})</code></pre>\n\n<p>In this test, we're performing the search, waiting for results to appear, then asserting conditions of our page. \nHere's the test with selectors filled in:</p>\n\n<pre><code class='javascript'> S('#cb_flickr').click();\n S('#query').click().type('puppy\\r');\n\n S('#flickr li').visible(function(){\n      equals(S('#flickr li').size(), 10, 'There are 10 results')\n      ok( /puppy/.test( S('#history .text').text() ), 'History has puppy')\n })</code></pre>", "title": "Demos", "parents": ["FuncUnit"], "order": 8, "src": "funcunit/pages/demos.md", "children": []})
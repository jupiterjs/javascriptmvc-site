c({"name": "view.deferreds", "type": "page", "comment": "<p>jQuery 1.6 brought [http://api.jquery.com/category/deferred-object/ Deferred] support.  They are a great feature that promise to make a lot of asynchronous functionality easier to write and manage. jQuery.View uses Deferreds to simplify a common but annoying task into a one-liner: loading data and a template and rendering the result into an element.</p>\n\n<h2>Templates Consume Deferreds</h2>\n\n<p>Here's what rendering templates looks like with deferreds:</p>\n\n<pre><code>$('#todos').html('temps/todos.ejs', $.get('/todos',{},'json') );\n</code></pre>\n\n<p>This will make two parallel ajax requests.  One request \nis made for the template at <code>temps/todos.ejs</code>:</p>\n\n<pre><code>&lt;% for(var i =0; i &lt; this.length; i++) { %>\n  &lt;li>&lt;%= this[i].name %>&lt;/li>\n&lt;% } %>\n</code></pre>\n\n<p>The second request for <code>/todos</code> might respond with a JSON array:</p>\n\n<pre><code>[\n    {\"id\" : 1, \"name\": \"Take out the Trash\"},\n    {\"id\" : 2, \"name\": \"Do the Laundry\"}\n]\n</code></pre>\n\n<p>When both have been loaded, the template is rendered with the todos data.  The resulting HTML is placed in the <code>#todos</code> element.</p>\n\n<p>This is fab fast! The AJAX and template request are made in parallel and rendered\nwhen both are complete. Before deferreds, this was a lot uglier:</p>\n\n<pre><code>var template,\n    data,\n    done = function(){ \n       if( template &amp;&amp; data ) { \n         var html = new EJS({text: template})\n                                .render(data);\n         $('#todos').html( html )\n       }\n    }\n$.get('temps/todos.ejs', function(text){\n  template = text;\n  done();\n},'text')\n$.get('/todos',{}, function(json){\n  data = json\n  done();\n},'json')\n</code></pre>\n\n<h2>Models Return Deferreds</h2>\n\n<p>Model AJAX functions now return deferreds.  Creating models like:</p>\n\n<pre><code>$.Model('User',{\n  findAll: '/users'\n},{});\n\n$.Model('Todo',{\n  findAll: '/todos'\n},{})\n</code></pre>\n\n<p>Lets you request todos and users and get back a deferred that can be \nused in functions that accept deferreds like $.when:</p>\n\n<pre><code>$.when( User.findAll(), \n        Todo.findAll() )\n</code></pre>\n\n<p>Or $.View:</p>\n\n<pre><code>$('#content').html('temps/content.ejs',{\n  users : User.findAll(),\n  todos: Todo.findAll()\n})\n</code></pre>", "title": "Using Deferreds with Views", "parents": ["jQuery.View"], "order": 1, "src": "jquery/view/pages/deferreds.md", "children": []})
<head>
	<title>JavaScriptMVC</title>
	<link rel="stylesheet" type="text/css" href="../documentjs/jmvcdoc/style.css">
	<link rel="shortcut icon" href="../documentjs/jmvcdoc/images/favicon.ico">
<link rel="stylesheet" href="file:////opt/local/share/java/tomcat6/webapps/jmvc31/jmvcdoc/style.css" type="text/css"></head><body>
<div id="documentation">
	<div id="top">
		<div class="topCorner">
			<div class="right"></div>
			<div class="left"></div>
		</div>
		<div class="content">
			<div id="searchRoundCorners">
				<input id="search" type="input" class="jmvcdoc_search">
			</div>
			<div id="defaults">
				<ul id="menu" class="ui-menu">
					<li class="ui-menu-item">
						<a class="menuLink" href="#&amp;search=core"><span class="menuSpan">Core</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="#favorites"><span class="menuSpan">Favorites</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../follow.html" title="Follow"><span class="menuSpan red">Follow</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../contribute.html" title="Contribute"><span class="menuSpan red">Contribute</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../code.html" title="Code"><span class="menuSpan red">Code</span></a>
					</li>
				</ul>
			</div>
			<div class="logo-text"><a href="http://javascriptmvc.com"><img src="../documentjs/jmvcdoc/images/logo80x30.png" class="logo-image"></a></div>
		</div>
		<div class="bottomCorner">
			<div>&nbsp;</div>
		</div>
	</div>
	<div id="bottom">
		<div id="nav" class="jmvcdoc_nav">


	<div id="selected">
		    
				
		<div class="content">
			    <a href="#!" class="selected choice page" style="padding-left: 20px">
			    	
					JavaScriptMVC
					
				</a>
				
		</div>
			
		<div class="spacer"><div>&nbsp;</div></div>
			
			
				
		<div class="content">
			    <a href="#!examples" class="selected choice page" style="padding-left: 20px">
			    	
						<span class="remove" title="close"></span>
					
					Examples
					
				</a>
				
		</div>
			
			
	</div>

<div id="results" style="display: block">
	<div class="content">
	    
			
		    <a href="#!srchr" class="result choice page open" style="padding-left: 20px">
		    	Srchr
			</a>
			
		
			
		    <a href="#!contacts" class="result choice page" style="padding-left: 20px">
		    	Contacts
			</a>
			
		
			
		    <a href="#!playermx" class="result choice page" style="padding-left: 20px">
		    	PlayerMX
			</a>
			
		
			
		    <a href="#!todo" class="result choice page" style="padding-left: 20px">
		    	Todo
			</a>
			
		
	</div>
</div>


</div>
		<div id="doc_container">
			<div id="doc" class="jmvcdoc_content">
<div class="top">
	<div class="content">
	    <h1>Srchr&nbsp;
	    	<span class="page type"><span class="typeEnd">page</span></span>&nbsp;
	    	<span class="favorite favoriteoff">&nbsp;&nbsp;&nbsp;</span></h1>
	    
	    
	    
		
		
	</div>
</div>


<p>Srchr searches several data sources for content and displays it to the user.  See it in action <a href="http://javascriptmvc.com/srchr/">here</a>. This article covers:</p>

<ul>
<li>the ideas behind JavaScriptMVC</li>
<li>how JavaScriptMVC enables code separation</li>
<li>srchr's architecture</li>
</ul>

<h2>Installing the Srchr</h2>

<p>You can install Srchr by using steal's <a href="#!steal.get">getjs</a> or via the <a href="https://github.com/jupiterjs/srchr">git repository</a>.</p>

<h3>1. Installing with getjs</h3>

<p>The simplest way to install Srchr is to use the built in getjs script:</p>

<pre><code class=" javascript">&gt; .<span class="regexp">/js steal/g</span>etjs srchr
</code></pre>

<p>It will download the whole application complete with dependencies.</p>

<h3>2. Installing via git</h3>

<p>You can also install the Srchr app by cloning the git repo:</p>

<pre><code class=" javascript">&gt; git clone git@github.com:jupiterjs/srchr.git
&gt; cd srchr
&gt; git submodule init
&gt; git submodule update
&gt; cd documentjs &amp;&amp; git checkout master &amp;&amp; cd ..
&gt; cd funcunit &amp;&amp; git checkout master
&gt; git submodule init
&gt; git submodule update
&gt; cd syn &amp;&amp; checkout master &amp;&amp; cd ..
&gt; cd ..
&gt; cd jquery &amp;&amp; git checkout master &amp;&amp; cd ..
&gt; cd steal &amp;&amp; git checkout master &amp;&amp; cd ..
</code></pre>

<p>Srchr is now ready to be used.</p>

<h2>The "JavaScriptMVC" way</h2>

<p>Srchr was built the 'JavaScriptMVC' way. It has a folder/file structure where:</p>

<ul>
<li>Code is logically separated and tested</li>
<li>Code is easily assembled into higher-order functionality.</li>
<li>Higher order functionality is tested.</li>
<li>We are able to regression test.</li>
</ul>

<h2>Code organization and separation</h2>

<p>Every JavaScript application implements different widgets to show and manipulate data. In JavaScriptMVC every one of these widgets is built as a standalone part that can be reused and tested. These widgets communicate to each other with events which results in a loosely coupled application. </p>

<p>Srchr is broken into logically separated components: </p>

<ul>
<li>Disabler - Listens for search messages and disables tab buttons. </li>
<li>History - A cookie saved list of items. </li>
<li>Search - Creates a search message when a search happens. </li>
<li>Search Result - Seaches for results and displays them. </li>
<li>Tabs - A Basic Tabs widget. </li>
</ul>

<p><img class="image_tag" src="file:////opt/local/share/java/tomcat6/webapps/jmvc31/tutorials/images/diagram.gif"></p>

<p><img class="image_tag" src="file:////opt/local/share/java/tomcat6/webapps/jmvc31/tutorials/images/app_organization.png"></p>

<p>By implementing each widget as loosely coupled to the rest of the application, we can easily organize code. Every widget is living in it's own directory complete with tests and resources.</p>

<p>That way we can test each of the widgets separately, and reuse the code across the projects.</p>

<p>Srchr's workflow can be outlined like this:</p>

<ol>
<li>User selects (via checkboxes) services that should be searched</li>
<li>User enters search term and clicks search button</li>
<li>On tab activation search is performed and results are shown (since first enabled tab is active by default, these results will be shown immediately)</li>
<li>Search params are saved to the history (cookie)</li>
</ol>

<p>All of these actions are bound to the search event that is triggered by the search widget. When the user performs a search these are the actions that get triggered:</p>

<ol>
<li>Disabler widget listens to the search event and disables or enables tabs based on the checkboxes' states</li>
<li>Search results widget shows results for the first enabled tabs</li>
<li>History widget saves the search params to the cookie</li>
</ol>

<p>When the user clicks another tab it will trigger the activate event on that tab, which results in following actions:</p>

<ol>
<li>Disabler widget listens to the activate event and checks if the tab is disabled. If it is it will prevent the activate event from bubbling.</li>
<li>Tabs widget listens to the activate event, and if it wasn't prevented from bubbling by the disabler widget, it will trigger the show event on the corresponding tab panel</li>
<li>Search results widget listens to the show event on the tab panel, and when triggered performs search and shows results to the user</li>
</ol>

<h2>Assembling the Srchr app</h2>

<p>After the widgets were developed and tested in the isolation, they need to be assembled into the application. Here is a quick overview of the techniques used to assemble the widgets in to the Srchr app.</p>

<p>Srchr is a small application, so most of the assembling is done in the srchr.js file. When you generate the JavaScriptMVC application:</p>

<pre><code class=" javascript">.<span class="regexp">/js jquery/g</span>enerate/app srchr
</code></pre>

<p>it will create the directory and file structure that will look like this:</p>

<p><img class="image_tag" src="file:////opt/local/share/java/tomcat6/webapps/jmvc31/tutorials/images/app_scaffold.png"></p>

<p>srchr/srchr.js file is your main JavaScript file that should load all higher order widgets and bootstrap the application. If you open the srchr.js file you will see something similar to this:</p>

<pre><code class=" javascript">// Load all of the plugin dependencies
steal('bunch/of/dependencies).then('srchr/srchr.less', function($){
  ....
});
</code></pre>

<p>Steal will first load all of the dependencies, and then run the function which is usually defined as a last argument. You can think of this function as of application controller. It's responsibilities usually are:</p>

<ul>
<li>render base application view on the page</li>
<li>find elements and initialize higher order widgets</li>
</ul>

<p>Srchr is a small application so all bootstrapping is done in the srchr.js file. When you have a bigger application that handles multiple resources you should create resource based higher order widgets that take care of bootstrapping and assembling of that part of application. You can read more about this <a href="http://edge.javascriptmvc.com/jmvc/docs.html#!organizing">here</a></p>

<h2>Dependency management - Steal</h2>

<p>JavaScriptMVC comes with the dependency manager called Steal. It allows every widget to list it's dependencies:</p>

<pre><code class=" javascript">steal(<span class="string">'plugin/name'</span>, <span class="string">'jquery/controller'</span>, <span class="string">'./widget.css'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span> ... })
</code></pre>

<p>Steal is smart enough to load resources only once even though multiple widgets may list the same resource. You can read more about steal in it's <a href="http://edge.javascriptmvc.com/jmvc/docs.html#!stealjs">own documentation</a>.</p>

<h2>Credits</h2>

<p>The idea for srchr app came from a Rebecca Murphey's blog post as an crowd sourced exercise in collecting JavaScript wisdom. You can read more about this exercise in the <a href="http://blog.rebeccamurphey.com/2010/03/15/srchr-crowdsourcing-javascript-wisdom/">original blog post</a>.</p></div>
			<div id="disqus_thread"></div>
		</div>
	</div>
</div>
<div id="low">
	<a href="http://jupiterit.com">ï¿½ Jupiter IT - JavaScriptMVC Training and Support</a>
	<a class="api_links" href="http://javascriptmvc.com/docs/api.html#&amp;who=api"></a>
</div>
<script src="http://www.google-analytics.com/ga.js" type="text/javascript"></script>
<script type="text/javascript">
	GOOGLE_ANALYTICS_TRACKER_ID = "UA-xxxxxxxx-x";
</script>
<script type="text/javascript">
	DOCS_LOCATION = "docs/" //adds searchData to this
	JMVCDOC_TIMESTAMP = 263436055
</script>
<script type="text/javascript" src="../steal/steal.js?jmvcdoc">
</script>
	

</body>
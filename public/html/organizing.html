<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
		"http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head><script type="text/javascript" src="http://localhost:5555?[]&amp;_=0.7790669708047062"></script>
	<title>Organizing Your App</title>

	<link rel="shortcut icon" href="../documentjs/jmvcdoc/images/favicon.ico">
	<script type="text/javascript" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxxx-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<style type="text/css">.floatLeft {
  float: left;
}
/* content types */
body {
  font-family: sans-serif, "Trebuchet MS", Verdana, Helvetica, Arial;
  margin: 20px 0px 0px 0px;
  background: #fcfcfc;
  font-size: 17px;
}
h1 {
  position: relative;
  margin: 0;
}
h1 span.subtitle {
  color: #888888;
  font-style: italic;
}
h2 {
  border-bottom: solid 1px	#C3E2EF;
  padding-bottom: 3px;
}
h3 {
  color: #96A84A;
  font-size: 1.3em;
  margin-bottom: 10px;
}
h5 {
  margin-bottom: 0px;
  padding-bottom: 0px;
}
pre {
  background-color: #F9F7DF;
  border: solid 1px white;
  margin: 13px 0;
  padding: 13px;
}
dl {
  margin: 10px;
}
td {
  padding: 3px;
  vertical-align: top;
}
.error {
  border: solid 1px red;
}
.error_text {
  color: red;
  font-size: 10px;
}
/* LAYOUT =========================*/
#documentation {
  width: 1024px;
  margin: 0px auto;
}
#top {
  margin: 0 20px 20px 20px;
  padding: 10px 0;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  background: #004634;
  background: -webkit-gradient(linear, left bottom, left top, color-stop(0, #004634), color-stop(1, #01654a));
  background: -ms-linear-gradient(bottom, #004634, #01654a);
  background: -moz-linear-gradient(center bottom, #004634 0%, #01654a 100%);
  background: -o-linear-gradient(bottom, #004634 0%, #01654a 100%);
  background: linear-gradient(bottom, #004634 0%, #01654a 100%);
  /*filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#01654a', endColorstr='#004634',GradientType=0 ); /* IE6-9 */

  -webkit-box-shadow: 0px 1px 0px #ffffff;
  -moz-box-shadow: 0px 1px 0px #ffffff;
  box-shadow: 0px 1px 0px #ffffff;
}
#top .content {
  /*height:34px;*/

  margin: 0 10px;
  overflow: auto;
}
#top #searchRoundCorners {
  float: left;
  width: 293px;
  height: 15px;
  padding: 0px;
  margin: 0px;
  zoom: 1;
  display: inline;
  padding-top: 5px;
}
#top #search {
  width: 273px;
  font-size: 14px;
  font-family: "Trebuchet MS", Verdana, Helvetica, Arial, sans-serif;
  float: left;
  border: none;
  background: #FFFFFF;
  outline: none;
  margin-left: 10px;
  position: absolute;
  margin: 0 0 0 10px;
  padding: 3px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border: 1px solid #004634;
  -webkit-box-shadow: 0px 1px 0px #0f8563;
  -moz-box-shadow: 0px 1px 0px #0f8563;
  box-shadow: 0px 1px 0px #0f8563;
}
#top .logo-text a {
  color: white;
  float: right;
  left: -8px;
  position: relative;
  top: -4px;
  text-decoration: none;
  border: none;
}
#top .logo-image {
  left: 4px;
  position: relative;
  top: 8px;
  border: none;
}
/* TOP MENU STYLE ===== */
#defaults {
  float: left;
  font-weight: bold;
  width: 400px;
  margin-left: 10px;
  margin-bottom: 1px;
  height: 35px;
  line-height: 35px;
}
#defaults a {
  color: white;
  /*padding: 0px 10px;*/

  margin: 0 1px;
  text-decoration: none;
}
#defaults .ui-menu {
  height: 25px;
  line-height: 25px;
  margin: 7px 0px;
  padding: 0px;
  list-style-image: none;
  list-style-position: outside;
  list-style-type: none;
  position: absolute;
  z-index: 1000;
}
#defaults .ui-menu-item {
  float: left;
  /*padding:0.5em 1em;*/

  cursor: pointer;
}
#defaults .menuLink, #defaults .menuSpan {
  display: inline;
  height: 25px;
  float: left;
  cursor: pointer;
  font-size: 16px;
  text-shadow: 0px -1px #000000;
}
#defaults .menuSpan {
  padding-left: 10px;
  padding-right: 10px;
}
#defaults .menuLink:hover .menuSpan, #defaults .menuLink:hover span.red {
  background-color: #899d09;
  color: white;
  border-radius: 3px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  text-shadow: 0px 1px #333;
  -webkit-box-shadow: 0px 1px 0px #003f2f;
  -moz-box-shadow: 0px 1px 0px #003f2f;
  box-shadow: 0px 1px 0px #003f2f;
}
html*#searchRoundCorners {
  /* ie7 hack */

  padding: 7px;
}
.inside td {
  vertical-align: middle;
}
#bottom {
  margin: 0px 20px;
  clear: both;
}
#bottom p, #bottom ul, #bottom ol {
  color: #333;
  line-height: 24px;
}
#bottom a {
  color: #1f54c6;
}
#bottom p code {
  border: solid 1px #F9F7DF;
  white-space: nowrap;
  background-color: #eeeeee;
}
#bottom h2 code, #bottom h3 code {
  font-size: 17px;
  font-weight: normal;
  color: #333333;
  border: solid 1px #F9F7DF;
  background-color: #f9f9f9;
}
#nav {
  width: 300px;
  min-height: 10px;
  float: left;
  /*background-color: #2D2E26;*/
  /*#B8B495*/

  /*background-color:rgb(239,242,213);*/

  overflow: auto;
  margin-right: 20px;
  margin-bottom: 20px;
}
#nav a {
  display: block;
  padding: 5px;
  text-decoration: none;
  font-size: 14px;
  /*color: #F1F1C3;*/

  color: #404038;
  border: none;
  outline: none;
}
#nav #selected {
  margin: 0 0 10px 0;
}
#nav #selected .selected {
  font-size: 17px;
  font-weight: bold;
}
#nav #selected .spacer {
  height: 10px;
  background: #fcfcfc;
}
#nav #selected .content {
  margin: 0 0px;
  clear: both;
}
#nav #selected .content a {
  padding: 5px 10px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  background-color: #d2d988;
}
#nav #selected .content .highlight {
  background-color: #d7e1ad;
}
#nav #results {
  /*margin:10px 0 0 0;*/

  background-color: #e6f1ba;
  padding: 5px 0;
}
#nav #results .highlight {
  /*background-color: #3C3D32;*/

  background-color: #b6dceb;
}
#nav #results .open {
  /*the opened color*/

  background: #a0b348;
  color: white;
  font-weight: bold;
}
#nav .faded {
  color: gray;
}
#nav .prototype, #nav .static {
  color: gray;
}
#nav .class, #nav .constructor {
  font-weight: bold;
}
#nav .attribute {
  color: red;
}
#doc_container {
  margin-right: 0px;
  margin-left: 320px;
}
#doc {
  /*line-height:24px;*/

  /*padding: 0 20px 0 0;*/

  margin: 0;
}
#doc .type {
  color: gray;
  font-size: 0.8em;
}
#doc .content .type, #doc .typeEnd {
  text-shadow: none;
  display: inline-block;
  font-size: 0.7em;
  color: #FFFFFF;
  background: url("file:////Users/fred/Projects/jupiter/javascriptmvc-site/javascriptmvc/documentjs/jmvcdoc/images/type.png") no-repeat;
  background-position: 0 0;
  vertical-align: middle;
  margin-left: -9px;
  margin-bottom: 3px;
  *margin-bottom: 0px;
  /* ie7 */

}
#doc .typeEnd {
  display: block;
  line-height: 21px;
  background-position: 100% 0;
  margin-left: 11px;
  padding: 0 10px 0 5px;
  float: left;
}
#doc .top {
  margin: 0 0 20px;
  line-height: 38px;
  background-color: #c3e2ef;
  padding: 5px 0 1px 0;
  text-shadow: 0px 1px white;
  color: #222;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
}
#doc .top .content {
  margin: 5px 20px 5px 20px;
}
#doc .favorite {
  float: right;
  cursor: pointer;
  background-repeat: no-repeat;
  /*background-position: left 16px;*/

  /* ie7 hacks */

  *position: absolute;
  top: 5px;
  right: 0;
}
#doc .favoriteon {
  background-image: url(file:////Users/fred/Projects/jupiter/javascriptmvc-site/javascriptmvc/documentjs/jmvcdoc/images/fav-on.png);
}
#doc .favoriteoff {
  background-image: url(file:////Users/fred/Projects/jupiter/javascriptmvc-site/javascriptmvc/documentjs/jmvcdoc/images/fav-off.png);
}
#disqus_thread {
  margin: 0;
}
.remove {
  float: right;
  display: block;
  width: 16px;
  text-align: center;
  height: 16px;
  background-image: url('file:////Users/fred/Projects/jupiter/javascriptmvc-site/javascriptmvc/documentjs/jmvcdoc/images/sidebar_top_close.png');
  margin: 1px -4px 0 0;
  opacity: 0.5;
}
.remove :hover {
  opacity: 1;
}
.jmvcdoc_search {
  position: relative;
}
.jmvcdoc_search .remove {
  display: none;
  position: absolute;
  top: 3px;
  right: 11px;
}
#low {
  font-size: 12px;
  margin: 10px auto;
  text-align: center;
  color: white;
  background: #e0e0e0;
  height: 30px;
  line-height: 30px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  clear: both;
  width: 1024px;
}
#low a {
  color: #666;
  text-decoration: none;
  font-weight: bold;
}
/* CONTENT FORMATTING ============= */
.param, .return {
  text-indent: -48px;
  margin-left: 48px;
}
.param *, .return * {
  text-indent: 0px;
}
.param label, .return label {
  color: #808080;
  font-size: 10pt;
  font-weight: bold;
  margin: 0;
}
.options {
  margin-left: 40px;
  margin-right: 40px;
  text-align: left;
}
.options th {
  border-bottom: 1px solid #EEEEEE;
  font-family: "Helvetica Neue", Arial, sans-serif;
  font-size: 0.8em;
}
.options td {
  border-bottom: 1px solid #EEEEEE;
  font-size: 10pt;
  line-height: 150%;
  padding: 3px;
  vertical-align: top;
}
.signiture {
  border-color: #9C6854;
  background: none;
  background-color: white;
}
.params {
  margin-left: 13px;
}
code .comment {
  color: #007000;
}
.string {
  color: Gray;
}
.keyword {
  color: #800080;
}
code .params {
  color: blue;
  margin: 0px;
}
.magic {
  background-color: #FFF7D7;
}
.console {
  color: blue;
}
.this {
  color: #0000C0;
}
table pre {
  margin: 0px;
}
.floatLeft {
  float: left;
}
h2.spaced {
  clear: left;
  padding-top: 18px;
}
.warn {
  margin: 13px;
  padding: 13px;
  font-size: 11px;
  border: 1px solid #9C6854;
  background-color: #eeeeee;
}
.tip {
  font-size: 0.8em;
  font-family: verdana;
  padding-left: 13px;
}
.noborder {
  border: none;
}
.floatLeft .noborder {
  padding-right: 10px;
}
iframe {
  display: block;
  clear: right;
  width: 100%;
  border: 1px solid #cccccc;
  padding: 0 0 10px 10px;
  margin: 10px 0 10px 0;
  background-color: #eeeeee;
}
.iframe_wrapper {
  border: 1px solid #ffffff;
}
.iframe_menu_button {
  display: block;
  float: right;
  width: 100px;
  background-color: #cccccc;
  border-top: 1px solid #999999;
  border-left: 1px solid #999999;
  border-right: 1px solid #999999;
  cursor: pointer;
}
.iframe_menu {
  list-style-image: none;
  list-style-position: outside;
  list-style-type: none;
  font-size: 0.7em;
  background-color: #ffffff;
  border: 1px solid #999999;
  padding: 5px;
  margin: 0;
}
.iframe_menu_item {
  margin: 5px 2px 0px 2px;
}
/* @demo css
-------------*/
.demo .reset {
  padding: 0;
  margin: 0;
  border: 0;
  outline: 0;
  line-height: 1.3;
  text-decoration: none;
  font-size: 100%;
  list-style: none;
}
.demo .header a {
  font-family: "Trebuchet MS", Verdana, Helvetica, Arial, sans-serif;
  font-size: 12px;
  /*background-color: #AABF54;*/

  background-color: #D2D988;
  display: block;
  padding: .5em .5em .5em 2.2em;
  margin: 0;
  color: #FFFFFF;
  cursor: pointer;
  position: relative;
  margin-top: 1px;
  zoom: 1;
  /*border: 1px solid #AABF54;*/

  border: 1px solid #D2D988;
  text-decoration: none;
}
.demo .header .ui-icon {
  position: absolute;
  left: .5em;
  top: 50%;
  margin-top: -8px;
}
.demo .content {
  border: 1px solid #AABF54;
}
.demo .content iframe {
  padding: 0;
  margin: 0;
  background-color: #FFFFFF;
  border: none;
}
.demo pre {
  padding: 10px;
  margin: 0px;
  background-image: none;
}
.demo pre code {
  font-family: "Courier New";
  border: none;
}
.component {
  margin-right: 12px;
  height: 80px;
  float: left;
}
.whisper {
  color: #96A84A;
}
/* menu items */
iframe.pluginify {
  border: none;
  background: none;
  margin: 0px;
  height: 2060px;
  padding: 0px;
}
#tooltip {
  background-color: #b6dceb;
  height: 16px;
  padding: 5px;
  border-top: solid 5px white;
  border-bottom: solid 5px white;
  border-right: solid 5px white;
}
</style></head><body>
<div id="documentation">
	<div id="top">
		<div class="content">
			<div id="searchRoundCorners">
				<div class="jmvcdoc_search"><input id="search" type="input"><span title="clear term" class="remove"></span></div>
			</div>
			<div id="defaults">
				<ul id="menu" class="ui-menu">
					<li class="ui-menu-item">
						<a class="menuLink" href="#favorites"><span class="menuSpan">Favorites</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../follow.html" title="Follow"><span class="menuSpan red">Follow</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../contribute.html" title="Contribute"><span class="menuSpan red">Contribute</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../code.html" title="Code"><span class="menuSpan red">Code</span></a>
					</li>
				</ul>
			</div>
			<div class="logo-text"><a href="http://javascriptmvc.com"><img src="../documentjs/jmvcdoc/images/logo80x30.png" class="logo-image"></a></div>
		</div>
	</div>
	<div id="bottom">
		<div id="nav" class="jmvcdoc_nav">


	<div id="selected">
		    
				
		<div class="content">
			    <a href="#!" class="selected choice page" style="padding-left: 20px">
			    	
					JavaScriptMVC
					
				</a>
				
		</div>
			
				<div class="spacer"><div>&nbsp;</div></div>
			
			
				
		<div class="content">
			    <a href="#!tutorials" class="selected choice page" style="padding-left: 20px">
			    	
						<span class="remove" title="close"></span>
					
					Tutorials
					
				</a>
				
		</div>
			
			
	</div>

<div id="results" style="display: block">
	<div class="content">
	    
			
		    <a href="#!installing" class="result choice page" style="padding-left: 20px" data-name="installing">
		    	
					<span class="faded"></span>Installing JavaScriptMVC
				
			</a>
			
		
			
		    <a href="#!rapidstart" class="result choice page" style="padding-left: 20px" data-name="rapidstart">
		    	
					<span class="faded"></span>Rapid Start
				
			</a>
			
		
			
		    <a href="#!getstarted" class="result choice page" style="padding-left: 20px" data-name="getstarted">
		    	
					<span class="faded"></span>Get Started with JavaScriptMVC
				
			</a>
			
		
			
		    <a href="#!mvc" class="result choice page" style="padding-left: 20px" data-name="mvc">
		    	
					<span class="faded"></span>Get Started with jQueryMX
				
			</a>
			
		
			
		    <a href="#!tutorials.steal" class="result choice page" style="padding-left: 20px" data-name="tutorials.steal">
		    	
					<span class="faded"></span>Get Started With StealJS
				
			</a>
			
		
			
		    <a href="#!funcunit.getstarted" class="result choice page" style="padding-left: 20px" data-name="funcunit.getstarted">
		    	
					<span class="faded"></span>Get Started with FuncUnit
				
			</a>
			
		
			
		    <a href="#!organizing" class="result choice page open" style="padding-left: 20px" data-name="organizing">
		    	
					<span class="faded"></span>Organizing Your App
				
			</a>
			
		
			
		    <a href="#!ajaxy" class="result choice page" style="padding-left: 20px" data-name="ajaxy">
		    	
					<span class="faded"></span>Searchable Ajax Apps
				
			</a>
			
		
			
		    <a href="#!services" class="result choice page" style="padding-left: 20px" data-name="services">
		    	
					<span class="faded"></span>Ajax Service Guidelines
				
			</a>
			
		
			
		    <a href="#!migrate" class="result choice page" style="padding-left: 20px" data-name="migrate">
		    	
					<span class="faded"></span>Upgrading to 3.2
				
			</a>
			
		
	</div>
</div>


</div>
		<div id="doc_container">
			<div id="doc" class="jmvcdoc_content">
<div class="top">
	<div class="content">
	    <h1>Organizing Your App&nbsp;
	    	<span class="page type"><span class="typeEnd">page</span></span>&nbsp;
	    	<span class="favorite favoriteoff">&nbsp;&nbsp;&nbsp;</span></h1>
	    
	    
	    
		
		
		
	</div>	
</div>


<p>The secret to building large apps is to NEVER build
large apps.  Break up your applications into small 
pieces.  Then assemble those testable, bite-sized pieces 
into your big application.</p>

<p>JavaScriptMVC 3.X is built with this pattern in 
mind. As opposed to a single flat 'scripts' folder, 
JavaScriptMVC breaks up your app into
manageable, isolated modules. This tutorial discusses
the reasons for doing this and patterns for doing it.</p>

<h2>Why</h2>

<p>Traditionally JavaScript, CSS and static resources were seen as second-class
citizens when compared to server code.  JavaScript code was put in a single
flat 'scripts' folder that looked like:</p>

<pre><code class=" javascript">button.js
jquery.ui.calendar.js
contactmanager.js
tabs.js
jquery.js
nav.js
resizer.js
\test
  button_test.js
  contactmanager.js
  tabs_test.js
  nav_test.js
</code></pre>

<p>This was OK for a limited amount of JavaScript; however; client code
increasingly represents a larger percentage of an 
app's codebase.  What works for 10 files does not work for 100.</p>

<p>Complicating matters, an individual JavaScript file might have dependencies on
non-JavaScript resources.  It's easy to imagine a menu needing 
a specific stylesheet, images, or <a href="#!jQuery.View">client side template</a> to run.  </p>

<p>Spreading these dependencies across images, styles, templates etc folders
leads to bad organization and potentially bad performance.  For example, it can be
hard to know if a particular style rule is needed.</p>

<h3>The Fix</h3>

<p>JavaScriptMVC gives each resource you author it's own folder.  Typically,
the folder will hold the resource, the its demo page, test page,
test script, and any other files specific to that resource.</p>

<p>For example, a tabs folder might look like:</p>

<pre><code class=" javascript">\tabs
  tabs.js        - the code <span class="keyword">for</span> a tabs widget 
  tabs.html      - a demo page
  funcunit.html  - a test page
  tabs_test.js   - test code
  tabs.css       - css <span class="keyword">for</span> the tab
</code></pre>

<p>The idea is that we can work on <code>tabs.js</code> in complete isolation.</p>

<h2>How</h2>

<p>Before we discuss best practices for organizing your application, a little
throat clearing ...</p>

<blockquote>
  <p>Every app is different. Providing a single folder structure for
  all applications is impossible. However, there are several useful 
  patterns that when understood can keep your
  application under control. JavaScriptMVC is extremely flexible so use your best judgement!</p>
</blockquote>

<p>This guide walks you through starting with a small-ish example app and where you would add
features over time.  Before the example, it's good to know some JavaScript terminology:</p>

<h3>App and Library Folders</h3>

<p>In general, a JavaScriptMVC application is divided into two root folders: an app folder and
library folder. The app folder code typically 'steals' and configures 'library' code.  </p>

<h4>Application Folder</h4>

<p>The application (or app) folder houses code specific to a particular 
application.  The code in this folder is very unlikely to be
used in other places.  The folder name reflects the name of the application 
being built.  </p>

<p>Create an application folder structure with:</p>

<pre><code class=" javascript">js jquery\generate\app cms
</code></pre>

<h4>Library Folders</h4>

<p>A library folder is for general code that 
can be reused across several applications.  It is the perfect place for 
reusable controls like a tabs widget.  Typically folder names reflect
the name of the organization building the controls.  </p>

<h3>Resource Types</h3>

<p>An application is comprised of various resources.  JavaScriptMVC's code generators can 
be used to create these resources.</p>

<p><strong>Model</strong> - A model represents a set of services.  Typically, they exist within an application
folder's <code>models</code> directory and are used to request data by other controls.</p>

<p>Generate a model like:</p>

<pre><code class=" javascript">js jquery\generate\model cms\models\image
</code></pre>

<p><strong>Controller</strong> - A controller is a widget or code that combines and organizes
several widgets.  Reusable widgets are added to library folders.  Controllers specific
to an application should be put in a folder within an application folder.</p>

<p>Generate a controller like:</p>

<pre><code class=" javascript">js jquery\generate\controller jupiter\tabs
</code></pre>

<p><strong>Plugin</strong> - A plugin is a low-level reusable module such as a special event or dom extension.
It does not typically have a visible component.  These should be added to library folders.</p>

<pre><code class=" javascript">js jquery\generate\plugin jupiter\range
</code></pre>

<h2>Example Application</h2>

<p>The example is a content management system that organizes 'videos', 'images', and 
'articles' under a tabbed layout.  For each content type, the user needs
to be able to edit a selected item of that type.</p>

<p><img class="image_tag" src="file:////Users/fred/Projects/jupiter/javascriptmvc-site/javascriptmvc/tutorials/cms.png"></p>

<p>If the application's name is <strong>cms</strong> and it is built by <strong>Jupiter</strong>, a basic version's
folder structure might look like:</p>

<pre><code class=" javascript">\cms
  \models    - models <span class="keyword">for</span> the CMS
  \views     - views to configure the grid
  cms.js
\jupiter
  \tabs      - a basic tabs widget
  \edit      - binds a form to edit a model instance
  \grid      - a configurable grid
    \views
</code></pre>

<p>This basic version assumes that we can configure the grid and edit widget
enough to produces the desired functionality. In this case,
<code>cms/cms.js</code> might look like:</p>

<pre><code class=" javascript"><span class="comment">// load dependencies</span>
steal(<span class="string">'jupiter/tabs'</span>,
      <span class="string">'jupiter/grid'</span>,
      <span class="string">'jupiter/create'</span>,
      <span class="string">'./models/image'</span>,
      <span class="string">'./models/video'</span>,
      <span class="string">'./models/article'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>

  <span class="comment">// add tabs to the page</span>
  $(<span class="string">'#tabs'</span>).jupiter_tabs();

  <span class="comment">// Configure the video grid</span>
  $(<span class="string">'#videos'</span>).jupiter_grid({
    model: Cms.Models.Video,
    view: <span class="string">"//cms/views/videos.ejs"</span>
  })

  <span class="comment">// listen for when a video is selected</span>
  .bind(<span class="string">'select'</span> , <span class="function"><span class="keyword">function</span><span class="params">(ev, video)</span>{</span>

    <span class="comment">// update the edit form with the selected </span>
    <span class="comment">// video's attributes</span>
    $(<span class="string">'#videoEdit'</span>).jupiter_edit({ model: video });
  });

  <span class="comment">// Do the same for images and articles</span>
  $(<span class="string">'#images'</span>).jupiter_grid({
    model: Cms.Models.Image,
    view: <span class="string">"//cms/views/images.ejs"</span>
  }).bind(<span class="string">'select'</span> , <span class="function"><span class="keyword">function</span><span class="params">(ev, image)</span>{</span>
    $(<span class="string">'#imageEdit'</span>).jupiter_edit({ model: image });
  });

  $(<span class="string">'#articles'</span>).jupiter_grid({
    model: Cms.Models.Article,
    view: <span class="string">"//cms/views/article.ejs"</span>
  }).bind(<span class="string">'select'</span> , <span class="function"><span class="keyword">function</span><span class="params">(ev, article)</span>{</span>
    $(<span class="string">'#articleEdit'</span>).jupiter_edit({ model: article });
  });

})
</code></pre>

<p>Notice that the <code>cms.js</code> configures the grid and edit widgets with
the cms folder's models and views.  This represents an ideal separation between
app specific code and reusable widgets.  However, it's extremely rare that 
widgets are able to provide all the functionality an app needs to meet its
requirements.</p>

<h3>More complexity</h3>

<p>Eventually, you won't be able to configure abstract widgets to satisfy
the requirements of your application.  For example, you might need to 
add specific functionality around listing and editing videos (such as a thumbnail editor).</p>

<p>This is application specific functionality and belongs 
in the application folder.  We'll encapsulate it in a controller for each type:</p>

<pre><code class=" javascript">\cms
  \articles - the articles tab
  \images   - the images tab
  \videos   - the videos tab
  \models  
  \views     
  cms.js
\jupiter
  \thumbnail
  \tabs     
  \edit      
  \grid      
    \views
</code></pre>

<p><code>cms/cms.js</code> now looks like:</p>

<pre><code class=" javascript">steal(<span class="string">'cms/articles'</span>,
      <span class="string">'cms/images'</span>,
      <span class="string">'cms/videos'</span>,
      <span class="string">'jupiter/tabs'</span>,
      <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>

  $(<span class="string">'#tabs'</span>).jupiter_tabs();

  <span class="comment">// add the video grid</span>
  $(<span class="string">'#videos'</span>).cms_videos()

  <span class="comment">// Do the same for images and articles</span>
  $(<span class="string">'#images'</span>).cms_images();
  $(<span class="string">'#articles'</span>).cms_articles();

})
</code></pre>

<p><code>cms/articles/articles.js</code> might look like:</p>

<pre><code>steal('jupiter/grid',
      'jupiter/edit',
      'jquery/controller', 
      'jquery/view/ejs',
      'jupiter/thumbnail',
      function(){

  $.Controller('Cms.Articles',
  {
    listensTo: <a href="#!select">select</a>
  },
  {
    init : function(){
      // draw the html for the tab
      this.element.html('//cms/articles/views/init.ejs',{});

      // configure the grid
      this.find('.grid').jupiter_grid({
        model: Cms.Models.Article,
        view: "//cms/articles/views/article.ejs"
      });
    },

    // when the grid triggers a select event
    "select" : function(el, ev, article){

      // add or update the edit control
      this.find('.edit').jupiter_edit({ model: article })

      // add the thumbnail editor
          .find('.thumbs').jupiter_thumbnail();
    }
  });

});
</code></pre>

<h3>Adding leaves to the tree</h3>

<p>In the previous example, we moved most of the code in <code>cms/cms.js</code> into
an articles, images, and videos plugin.  Each of these plugins should
work independently from each other, have it's own tests and demo page.</p>

<p>Communication between these high-level
controls should be configured in <code>cms/cms.js</code>.</p>

<p>Essentially, as your needs become more specific, you are encouraged to 
nest plugins within each other.</p>

<p>In this example, after separating out each type into it's own plugin, you might
want to split the type into edit and grid controls.  The resulting 
folder structure would look like:</p>

<pre><code class=" javascript">\cms
  \articles
    \grid
    \edit
  \images
    \grid
    \edit   
  \videos
    \grid
    \edit   
  \models  
  \views     
  cms.js
\jupiter
  \thumbnail
  \tabs     
  \edit      
  \grid      
</code></pre>

<p><code>cms/articles/articles.js</code> might now look like:</p>

<pre><code>steal('cms/articles/grid',
      'cms/articles/edit',
      'jquery/controller',
      'jquery/view/ejs',
      function(){

  $.Controller('Cms.Articles',
  {
    listensTo: <a href="#!select">select</a>
  },
  {
    init : function(){
      // draw the initial html
      this.element.html('//cms/articles/views/init.ejs',{});

      // create the articles grid
      this.find('.grid').cms_articles_grid();
    },
    "select" : function(el, ev, article){

      // update the articles edit control
      this.find('.edit').cms_articles_edit({ model: article });
    }
  });
})
</code></pre>

<p>JavaScriptMVC encourages you to organize your application folder as a tree.
The leaves of the tree are micro-controls that perform a specific task (such as
allowing the editing of videos).  </p>

<p>Higher-order controls (<code>cms/articles/articles.js</code>) combine leaves and other nodes 
into more complex functionality.  The root of the application is the application file 
(<code>cms/cms.js</code>).  It combines and configures all high-level widgets.</p>

<p>In general, low-level controls use jQuery.trigger to send messages 'up' to higher-order
controls.  Higher-order controls typically call methods on lower-level controls</p>

<p>The Cms.Articles control listening to a 'select' event produced by
Cms.Articles.Grid and creating (or updating) the Cms.Articles.Edit control
is a great example of this.</p>

<p>The situation where this breaks down is usually when a 'state' needs to be shared and communicated
across several controls.  <a href="#!jQuery.Observe">jQuery.Observe</a> and client <a href="#!jQuery.Model">models</a> are useful 
for this situation.</p>

<h2>Conclusion</h2>

<p>This is an extremely abstract article, but hopefully illustrates a few
important trends of JavaScriptMVC organization:</p>

<ul>
<li>Put code specific to an app in the application folder.</li>
<li>Put reusable plugins, widgets, and other code into library folders.</li>
<li>Fill out the tree.</li>
</ul></div>
			<div id="disqus_thread" style="display: none; "></div>
		</div>
	</div>
</div>
<div id="low">
	<a href="http://jupiterit.com">ï¿½ Jupiter Consulting - JavaScriptMVC Training and Support</a>
	<a class="api_links" href="http://javascriptmvc.com/docs/api.html#&amp;who=api"></a>
</div>
<script type="text/javascript">
	DOCS_SRC_MAP = {
		'funcunit' : 'https://github.com/jupiterjs/funcunit',
		'jquery' : 'https://github.com/jupiterjs/jquerymx',
		'steal' : 'https://github.com/jupiterjs/steal',
		'documentjs' : 'https://github.com/jupiterjs/documentjs',
		mxui : 'https://github.com/jupiterjs/mxui'
	};
	DOCS_LOCATION = "docs/" //adds searchData to this
	JMVCDOC_TIMESTAMP = 265469885
	COMMENTS_LOCATION = 'http://jmvcs3.disqus.com/embed.js';
</script>
<script type="text/javascript" src="../steal/steal.js?documentjs/jmvcdoc">
</script>

<style type="text/css">
  body > iframe { width: 0;} 
  #dsq-content #dsq-form-area .dsq-attach-media-container iframe { height: 13px; padding: 0;}
</style>
	

</body>
</html>